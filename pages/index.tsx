import Head from 'next/head'
import { InstagramEmbed } from 'react-social-media-embed'
// import { useEffect } from 'react'
// import { Database, aql } from 'arangojs'
// import debug from 'debug'
import { trpc } from '../utils/trpc'
import { useForm } from 'react-hook-form'

const IGEmbed = () => {
  return (
    <div className='grayscale'>
      <InstagramEmbed url='https://www.instagram.com/p/CA8DBgHAtSp/' width={328} />
    </div>
  )
}

function Heading() {
  return (
    <div className='border-2 border-x-0 border-black py-1'>
      <div className='border border-x-0 border-black py-2'>Tuesday, June 12, 2020 / Clear 19</div>
    </div>
  )
}

const SaveArticleInput = () => {
  const mutation = trpc.useMutation(['article.parse'])
  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm()

  const onSubmit = (data: any) => mutation.mutate({ url: data.url })

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input 
        type='text'
        placeholder='https://'
        className='input input-ghost w-full max-w-xs' 
        {...register("url", {required: true, maxLength: 80})}
      />

      <button type='submit' className='btn btn-ghost'>
        submit
      </button>
    </form>
  )
}

export default function Home() {
  return (
    <>
      <Head>
        <title>Keith Yao</title>
        <meta
          name='description'
          content='Generated by create next app and using NextUI as a react UI library'
        />
        <link rel='icon' href='/favicon.ico' />
      </Head>

      <div className='container mx-auto py-12'>
        <h1 className='text-center font-serif font-light tracking-widest text-6xl uppercase mb-4'>
          Keith Yao
        </h1>

        <Heading />

        <SaveArticleInput />

        <div className='columns-2 p-2 font-serif text-justify'>
          <p>
            Sometimes, Internet users land themselves in an uncommon situation where an app or
            website can be used for both work and personal situations. Well, a young front-end
            designer was spending up to 13 hours on the site, Codepen for work and her hobby, which
            unfortunately, is also coding. The designer, whose work includes a To-Do Terrarium,
            clarified, "Well, I didn't have to use it for work but it was already part of my
            workflow. It just made sense as it was more efficient." The biggest issue, she said, is
            that she would hop on Codepen for work, but would get distracted by pens made by others
            in the community for unexpectedly long periods of time, which then causes her to spend
            even more time on the site. "I mean, that's terrible right?" she asked. Codepen, which
            brands itself as the best place to build, test, and discover front-end code, has
            declined to comment at this time.
          </p>
        </div>
      </div>
    </>
  )
}
